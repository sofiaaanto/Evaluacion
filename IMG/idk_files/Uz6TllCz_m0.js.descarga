;/*FB_PKG_DELIM*/

__d("BotFeedbackKind",[],(function(a,b,c,d,e,f){a=Object.freeze({BOT_FEEDBACK_POSITIVE:0,BOT_FEEDBACK_NEGATIVE_GENERIC:1,BOT_FEEDBACK_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_NEGATIVE_INTERESTING:3,BOT_FEEDBACK_NEGATIVE_ACCURATE:4,BOT_FEEDBACK_NEGATIVE_SAFE:5,BOT_FEEDBACK_NEGATIVE_OTHER:6,BOT_FEEDBACK_NEGATIVE_REFUSED:7,BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING:8,BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT:9,BOT_FEEDBACK_NEGATIVE_PERSONALIZED:10,BOT_FEEDBACK_NEGATIVE_CLARITY:11,BOT_FEEDBACK_NEGATIVE_DOESNT_LOOK_LIKE_THE_PERSON:12,BOT_FEEDBACK_NEGATIVE_HALLUCINATION_INTERNAL_ONLY:13});f["default"]=a}),66);
__d("EmojiFormat.bs",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a.split("_").map(function(a){return parseInt(a,16)})}function a(a){return a.map(function(a){return a.toString(16)}).join("_")}function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function b(a){return h(g(a))}f.codeStringToCodeArray=g;f.codeArrayToCodeString=a;f.codeArrayToUnicode=h;f.codeStringToUnicode=b}),66);
__d("IGDSFace2OutlineIcon.react",["IGDSFace2PanoOutlineIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("IGDSFace2PanoOutlineIcon.react"),babelHelpers["extends"]({},a)),b[0]=a,b[1]=e):e=b[1];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDSReplyPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M14 8.999H4.413l5.294-5.292a1 1 0 1 0-1.414-1.414l-7 6.998c-.014.014-.019.033-.032.048A.933.933 0 0 0 1 9.998V10c0 .027.013.05.015.076a.907.907 0 0 0 .282.634l6.996 6.998a1 1 0 0 0 1.414-1.414L4.415 11H14a7.008 7.008 0 0 1 7 7v3.006a1 1 0 0 0 2 0V18a9.01 9.01 0 0 0-9-9Z"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:e})),b[1]=a,b[2]=e):e=b[2];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDSThumbDownPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M10.47 23a2 2 0 0 1-1.68-.91c-.783-1.201-2.55-4.045-3.84-6.121a242.263 242.263 0 0 0-1.429-2.29c-1.493-2.29-1.888-4.62-1.173-6.927C3.398 3.365 6.715 1 10.414 1h6.442a4.02 4.02 0 0 1 3.96 3.435l1.141 6.98A4.002 4.002 0 0 1 17.999 16h-5.093l.727 2.087a3.693 3.693 0 0 1-.264 3.063 3.697 3.697 0 0 1-2.496 1.809c-.135.027-.27.04-.403.04Zm-.005-2.003.015.002a1.701 1.701 0 0 0 1.267-2.244l-1.191-3.427A.998.998 0 0 1 11.5 14h6.499a2.001 2.001 0 0 0 1.98-2.283l-1.14-6.98A2.014 2.014 0 0 0 16.856 3h-6.442C7.582 3 5.051 4.786 4.258 7.344c-.537 1.735-.23 3.45.94 5.242.143.22.718 1.146 1.451 2.327 1.285 2.068 3.044 4.901 3.816 6.084Z"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:e})),b[1]=a,b[2]=e):e=b[2];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDSThumbUpPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M16.856 23h-6.442c-3.7 0-7.017-2.365-8.066-5.752-.715-2.308-.32-4.638 1.173-6.928.142-.216.708-1.127 1.43-2.289 1.29-2.076 3.056-4.92 3.838-6.12a1.997 1.997 0 0 1 2.084-.871 3.703 3.703 0 0 1 2.757 4.883L12.906 8H18a4.002 4.002 0 0 1 3.961 4.566l-1.147 7.019C20.537 21.523 18.834 23 16.856 23ZM10.473 3c-.006 0-.008.002-.008.004-.772 1.182-2.531 4.015-3.816 6.083a266.26 266.26 0 0 1-1.452 2.326c-1.17 1.793-1.476 3.508-.94 5.243C5.052 19.214 7.583 21 10.415 21h6.442c.99 0 1.84-.738 1.98-1.718l1.146-7.018A2.001 2.001 0 0 0 18 10h-6.5a.998.998 0 0 1-.944-1.328l1.188-3.416A1.701 1.701 0 0 0 10.48 3h-.007Z"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:e})),b[1]=a,b[2]=e):e=b[2];return e}b=i.memo(a);g["default"]=b}),98);
__d("LSDeleteReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(8).fetch([[[a[0],a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.actorId,a[2])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteReactionStoredProcedure";a.__tables__=["reactions"];e.exports=a}),null);
__d("LSMailboxAIBotFeedbackSubmissionStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SUBMITTED:1});f["default"]=a}),66);
__d("LSOptimisticUpsertReaction",["LSArrayGetObjectAt","LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTask","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[0]=d[20])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("timestamp_ms",a[1]),d[2].set("message_id",a[2]),d[2].set("actor_id",a[3]),d[2].set("reaction",a[4]),d[2].set("reaction_style",void 0),d[2].set("sync_group",d[0]),d[3]=c.createArray(),d[4]=(d[3].push("reaction"),d[3]),d[5]=d[2].get("message_id"),d[6]=(d[3].push(d[5]),d[3]),d[7]=c.toJSON(d[3]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[7],c.i64.cast([0,29]))},function(e){return a[4]===""?c.sequence([function(d){return c.storedProcedure(b("LSDeleteReaction"),a[0],a[2],a[3])},function(a){return d[8]=void 0}]):c.sequence([function(e){return a[4]==="\u2764\ufe0f"||a[4]==="\u2764\ufe0f"?d[20]="\u2764":d[20]=a[4],c.storedProcedure(b("LSUpsertReaction"),a[0],a[1],a[2],a[3],d[20],c.i64.cast([0,20]),void 0)},function(a){return d[8]=void 0}])},function(a){return void 0?d[9]=!1:d[9]=!0,d[9]?c.resolve(d[10]=void 0):c.sequence([function(a){return d[20]=new c.Map(),d[20].set("feature_tags",void 0),d[21]=new c.Map(),d[21].set("logging_metadata",d[20]),d[22]=new c.Map(),d[30]="product_params",d[23]=d[21].get(d[30]),d[23]?d[24]=!1:d[24]=!0,d[24]?0:(d[23]?d[33]=!1:d[33]=!0,d[33]?d[34]=void 0:(d[37]=new c.Map(),d[41]="product_type",d[38]=d[23].get(d[41]),d[38]!==void 0?d[37].set(d[41],d[38]):0,d[42]="product_extras",d[39]=d[23].get(d[42]),d[39]?d[40]=!1:d[40]=!0,d[40]?0:(d[39]?d[43]=!1:d[43]=!0,d[43]?d[44]=void 0:(d[47]=d[39].get("__typename"),d[47]==="XMSGStoryReplyExtras"?(d[49]=new c.Map(),d[52]="logging",d[50]=d[39].get(d[52]),d[50]?d[51]=!1:d[51]=!0,d[51]?0:(d[50]?d[53]=!1:d[53]=!0,d[53]?d[54]=void 0:(d[57]=new c.Map(),d[65]="story_author_fbid",d[58]=d[50].get(d[65]),d[58]!==void 0?d[57].set(d[65],d[58]):0,d[66]="camera_post_type",d[59]=d[50].get(d[66]),d[59]!==void 0?d[57].set(d[66],d[59]):0,d[67]="story_type",d[60]=d[50].get(d[67]),d[60]!==void 0?d[57].set(d[67],d[60]):0,d[68]="post_source",d[61]=d[50].get(d[68]),d[61]!==void 0?d[57].set(d[68],d[61]):0,d[69]="fb_post_type",d[62]=d[50].get(d[69]),d[62]!==void 0?d[57].set(d[69],d[62]):0,d[70]="conversation_starter_type",d[63]=d[50].get(d[70]),d[63]!==void 0?d[57].set(d[70],d[63]):0,d[71]="story_reply_type",d[64]=d[50].get(d[71]),d[64]!==void 0?d[57].set(d[71],d[64]):0,d[54]=d[57]),d[55]=d[54].keys(),d[56]=c.i64.of_int32(d[55].length),c.i64.neq(d[56],c.i64.cast([0,0]))?d[49].set(d[52],d[54]):0),d[48]=d[49]):(d[47]==="XMSGMarketplaceExtras"?(d[50]=new c.Map(),d[69]="listing_id",d[51]=d[39].get(d[69]),d[51]!==void 0?d[50].set(d[69],d[51]):0,d[70]="initial_clicked_component",d[52]=d[39].get(d[70]),d[52]!==void 0?d[50].set(d[70],d[52]):0,d[71]="initial_tracking",d[53]=d[39].get(d[71]),d[53]!==void 0?d[50].set(d[71],d[53]):0,d[72]="referral_surface",d[54]=d[39].get(d[72]),d[54]!==void 0?d[50].set(d[72],d[54]):0,d[73]="referral_story_type",d[55]=d[39].get(d[73]),d[55]!==void 0?d[50].set(d[73],d[55]):0,d[74]="referral_ui_component",d[56]=d[39].get(d[74]),d[56]!==void 0?d[50].set(d[74],d[56]):0,d[75]="surface",d[57]=d[39].get(d[75]),d[57]!==void 0?d[50].set(d[75],d[57]):0,d[76]="tracking",d[58]=d[39].get(d[76]),d[58]!==void 0?d[50].set(d[76],d[58]):0,d[77]="ui_component",d[59]=d[39].get(d[77]),d[59]!==void 0?d[50].set(d[77],d[59]):0,d[78]="ad_id",d[60]=d[39].get(d[78]),d[60]!==void 0?d[50].set(d[78],d[60]):0,d[79]="server_session_id",d[61]=d[39].get(d[79]),d[61]!==void 0?d[50].set(d[79],d[61]):0,d[80]="cf_page_id",d[62]=d[39].get(d[80]),d[62]!==void 0?d[50].set(d[80],d[62]):0,d[81]="live_shopping_video_id",d[63]=d[39].get(d[81]),d[63]!==void 0?d[50].set(d[81],d[63]):0,d[82]="logging_id",d[64]=d[39].get(d[82]),c.i64.neq(d[64],void 0)?d[50].set(d[82],d[64]):0,d[83]="photo_ids",d[65]=d[39].get(d[83]),d[65]?d[66]=!1:d[66]=!0,d[66]?0:d[50].set(d[83],d[65]),d[84]="is_customized_message",d[67]=d[39].get(d[84]),d[67]!==void 0?d[50].set(d[84],d[67]):0,d[85]="referral_code",d[68]=d[39].get(d[85]),d[68]!==void 0?d[50].set(d[85],d[68]):0,d[49]=d[50]):(d[47]==="XMSGClickToMessengerAdExtras"?(d[51]=new c.Map(),d[62]="encrypted_ads_token",d[52]=d[39].get(d[62]),d[52]!==void 0?d[51].set(d[62],d[52]):0,d[63]="product_type",d[53]=d[39].get(d[63]),d[53]!==void 0?d[51].set(d[63],d[53]):0,d[64]="post_id",d[54]=d[39].get(d[64]),d[54]!==void 0?d[51].set(d[64],d[54]):0,d[65]="ad_id",d[55]=d[39].get(d[65]),d[55]!==void 0?d[51].set(d[65],d[55]):0,d[66]="page_id",d[56]=d[39].get(d[66]),d[56]!==void 0?d[51].set(d[66],d[56]):0,d[67]="photo_id",d[57]=d[39].get(d[67]),d[57]!==void 0?d[51].set(d[67],d[57]):0,d[68]="photo_index",d[58]=d[39].get(d[68]),c.i64.neq(d[58],void 0)?d[51].set(d[68],d[58]):0,d[69]="fallback_url",d[59]=d[39].get(d[69]),d[59]!==void 0?d[51].set(d[69],d[59]):0,d[70]="product_id",d[60]=d[39].get(d[70]),d[60]!==void 0?d[51].set(d[70],d[60]):0,d[71]="user_id",d[61]=d[39].get(d[71]),d[61]!==void 0?d[51].set(d[71],d[61]):0,d[50]=d[51]):(d[47]==="XMSGZorroMessageExtras"?(d[52]=new c.Map(),d[54]="is_enabled",d[53]=d[39].get(d[54]),d[53]!==void 0?d[52].set(d[54],d[53]):0,d[51]=d[52]):(d[47]==="XMSGGenAISuggestedPromptExtras"?(d[53]=new c.Map(),d[56]="prompt_type",d[54]=d[39].get(d[56]),d[54]!==void 0?d[53].set(d[56],d[54]):0,d[57]="qpl_join_id",d[55]=d[39].get(d[57]),d[55]!==void 0?d[53].set(d[57],d[55]):0,d[52]=d[53]):(d[47]==="XMSGGenAIMultiModalExtras"?(d[54]=new c.Map(),d[58]="should_skip_genai_eval",d[55]=d[39].get(d[58]),d[55]!==void 0?d[54].set(d[58],d[55]):0,d[59]="associated_multimodal_message_id",d[56]=d[39].get(d[59]),d[56]!==void 0?d[54].set(d[59],d[56]):0,d[60]="qpl_join_id",d[57]=d[39].get(d[60]),d[57]!==void 0?d[54].set(d[60],d[57]):0,d[53]=d[54]):(d[47]==="XMSGGenAIFlashImagineExtras"?(d[55]=new c.Map(),d[58]="seed",d[56]=d[39].get(d[58]),c.i64.neq(d[56],void 0)?d[55].set(d[58],d[56]):0,d[59]="qpl_join_id",d[57]=d[39].get(d[59]),d[57]!==void 0?d[55].set(d[59],d[57]):0,d[54]=d[55]):(d[47]==="XMSGShareSheetExtras"?(d[56]=new c.Map(),d[58]="recipient_selection_session_id",d[57]=d[39].get(d[58]),d[57]!==void 0?d[56].set(d[58],d[57]):0,d[55]=d[56]):(d[47]==="XMSGGenAIAssistantAPIExtras"?(d[57]=new c.Map(),d[88]="referrer_session_id",d[58]=d[39].get(d[88]),d[58]!==void 0?d[57].set(d[88],d[58]):0,d[89]="thread_session_id",d[59]=d[39].get(d[89]),d[59]!==void 0?d[57].set(d[89],d[59]):0,d[90]="prompt_id",d[60]=d[39].get(d[90]),d[60]!==void 0?d[57].set(d[90],d[60]):0,d[91]="prompt_type",d[61]=d[39].get(d[91]),d[61]!==void 0?d[57].set(d[91],d[61]):0,d[92]="prompt_fit_topic",d[62]=d[39].get(d[92]),d[62]!==void 0?d[57].set(d[92],d[62]):0,d[93]="location_extras",d[63]=d[39].get(d[93]),d[63]?d[64]=!1:d[64]=!0,d[64]?0:(d[63]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[115]=new c.Map(),d[119]="has_previous_perm_prompt",d[116]=d[63].get(d[119]),d[116]!==void 0?d[115].set(d[119],d[116]):0,d[120]="latitude",d[117]=d[63].get(d[120]),d[117]!==void 0?d[115].set(d[120],d[117]):0,d[121]="longitude",d[118]=d[63].get(d[121]),d[118]!==void 0?d[115].set(d[121],d[118]):0,d[112]=d[115]),d[113]=d[112].keys(),d[114]=c.i64.of_int32(d[113].length),c.i64.neq(d[114],c.i64.cast([0,0]))?d[57].set(d[93],d[112]):0),d[94]="qpl_join_id",d[65]=d[39].get(d[94]),d[65]!==void 0?d[57].set(d[94],d[65]):0,d[95]="meta_ai_prompt_type",d[66]=d[39].get(d[95]),d[66]!==void 0?d[57].set(d[95],d[66]):0,d[96]="is_subsequent_send",d[67]=d[39].get(d[96]),d[67]!==void 0?d[57].set(d[96],d[67]):0,d[97]="context_injection_type",d[68]=d[39].get(d[97]),d[68]!==void 0?d[57].set(d[97],d[68]):0,d[98]="context_injection_timestamp_ms",d[69]=d[39].get(d[98]),d[69]!==void 0?d[57].set(d[98],d[69]):0,d[99]="meta_ai_response_to_persist",d[70]=d[39].get(d[99]),d[70]?d[71]=!1:d[71]=!0,d[71]?0:(d[70]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[115]=new c.Map(),d[122]="text",d[116]=d[70].get(d[122]),d[116]!==void 0?d[115].set(d[122],d[116]):0,d[123]="bot_response_id",d[117]=d[70].get(d[123]),d[117]!==void 0?d[115].set(d[123],d[117]):0,d[124]="bot_request_id",d[118]=d[70].get(d[124]),d[118]!==void 0?d[115].set(d[124],d[118]):0,d[125]="external_search_params",d[119]=d[70].get(d[125]),d[119]?d[120]=!1:d[120]=!0,d[120]?0:(d[119]?d[127]=!1:d[127]=!0,d[127]?d[128]=void 0:(d[131]=new c.Map(),d[139]="search_result_uri",d[132]=d[119].get(d[139]),d[132]?d[133]=!1:d[133]=!0,d[133]?0:(d[144]=c.i64.of_int32(d[132].length),c.i64.neq(d[144],c.i64.cast([0,0]))?d[131].set(d[139],d[132]):0),d[140]="search_query",d[134]=d[119].get(d[140]),d[134]!==void 0?d[131].set(d[140],d[134]):0,d[141]="attribution_link",d[135]=d[119].get(d[141]),d[135]!==void 0?d[131].set(d[141],d[135]):0,d[142]="search_engine",d[136]=d[119].get(d[142]),d[136]!==void 0?d[131].set(d[142],d[136]):0,d[143]="references_title",d[137]=d[119].get(d[143]),d[137]?d[138]=!1:d[138]=!0,d[138]?0:(d[144]=c.i64.of_int32(d[137].length),c.i64.neq(d[144],c.i64.cast([0,0]))?d[131].set(d[143],d[137]):0),d[128]=d[131]),d[129]=d[128].keys(),d[130]=c.i64.of_int32(d[129].length),c.i64.neq(d[130],c.i64.cast([0,0]))?d[115].set(d[125],d[128]):0),d[126]="followup_prompt_text",d[121]=d[70].get(d[126]),d[121]!==void 0?d[115].set(d[126],d[121]):0,d[112]=d[115]),d[113]=d[112].keys(),d[114]=c.i64.of_int32(d[113].length),c.i64.neq(d[114],c.i64.cast([0,0]))?d[57].set(d[99],d[112]):0),d[100]="gql_dark_test_qpl_join_id",d[72]=d[39].get(d[100]),d[72]!==void 0?d[57].set(d[100],d[72]):0,d[101]="gql_dark_test_client_start_time",d[73]=d[39].get(d[101]),d[73]!==void 0?d[57].set(d[101],d[73]):0,d[102]="prompt_context",d[74]=d[39].get(d[102]),d[74]?d[75]=!1:d[75]=!0,d[75]?0:(d[74]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[115]=new c.Map(),d[118]="context_token",d[116]=d[74].get(d[118]),d[116]!==void 0?d[115].set(d[118],d[116]):0,d[119]="context_token_type",d[117]=d[74].get(d[119]),c.i64.neq(d[117],void 0)?d[115].set(d[119],d[117]):0,d[112]=d[115]),d[113]=d[112].keys(),d[114]=c.i64.of_int32(d[113].length),c.i64.neq(d[114],c.i64.cast([0,0]))?d[57].set(d[102],d[112]):0),d[103]="imagine_flash_extras",d[76]=d[39].get(d[103]),d[76]?d[77]=!1:d[77]=!0,d[77]?0:(d[76]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[115]=new c.Map(),d[118]="seed",d[116]=d[76].get(d[118]),c.i64.neq(d[116],void 0)?d[115].set(d[118],d[116]):0,d[119]="qpl_join_id",d[117]=d[76].get(d[119]),d[117]!==void 0?d[115].set(d[119],d[117]):0,d[112]=d[115]),d[113]=d[112].keys(),d[114]=c.i64.of_int32(d[113].length),c.i64.neq(d[114],c.i64.cast([0,0]))?d[57].set(d[103],d[112]):0),d[104]="conversation_marker_id",d[78]=d[39].get(d[104]),d[78]!==void 0?d[57].set(d[104],d[78]):0,d[105]="multi_modal_extras",d[79]=d[39].get(d[105]),d[79]?d[80]=!1:d[80]=!0,d[80]?0:(d[79]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[115]=new c.Map(),d[119]="should_skip_genai_eval",d[116]=d[79].get(d[119]),d[116]!==void 0?d[115].set(d[119],d[116]):0,d[120]="associated_multimodal_message_id",d[117]=d[79].get(d[120]),d[117]!==void 0?d[115].set(d[120],d[117]):0,d[121]="qpl_join_id",d[118]=d[79].get(d[121]),d[118]!==void 0?d[115].set(d[121],d[118]):0,d[112]=d[115]),d[113]=d[112].keys(),d[114]=c.i64.of_int32(d[113].length),c.i64.neq(d[114],c.i64.cast([0,0]))?d[57].set(d[105],d[112]):0),d[106]="ads_extras",d[81]=d[39].get(d[106]),d[81]?d[82]=!1:d[82]=!0,d[82]?0:(d[81]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[115]=new c.Map(),d[119]="context",d[116]=d[81].get(d[119]),d[116]!==void 0?d[115].set(d[119],d[116]):0,d[120]="is_reply_to_ads_ai",d[117]=d[81].get(d[120]),d[117]!==void 0?d[115].set(d[120],d[117]):0,d[121]="is_message_processed_by_lightspeed",d[118]=d[81].get(d[121]),d[118]!==void 0?d[115].set(d[121],d[118]):0,d[112]=d[115]),d[113]=d[112].keys(),d[114]=c.i64.of_int32(d[113].length),c.i64.neq(d[114],c.i64.cast([0,0]))?d[57].set(d[106],d[112]):0),d[107]="suggested_prompt_extras",d[83]=d[39].get(d[107]),d[83]?d[84]=!1:d[84]=!0,d[84]?0:(d[83]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[115]=new c.Map(),d[118]="prompt_type",d[116]=d[83].get(d[118]),d[116]!==void 0?d[115].set(d[118],d[116]):0,d[119]="qpl_join_id",d[117]=d[83].get(d[119]),d[117]!==void 0?d[115].set(d[119],d[117]):0,d[112]=d[115]),d[113]=d[112].keys(),d[114]=c.i64.of_int32(d[113].length),c.i64.neq(d[114],c.i64.cast([0,0]))?d[57].set(d[107],d[112]):0),d[108]="disable_server_mqtt_typing_indicator",d[85]=d[39].get(d[108]),d[85]!==void 0?d[57].set(d[108],d[85]):0,d[109]="enable_web_scraping",d[86]=d[39].get(d[109]),d[86]!==void 0?d[57].set(d[109],d[86]):0,d[110]="client_prompt_timestamp",d[87]=d[39].get(d[110]),c.i64.neq(d[87],void 0)?(c.i64.neq(d[87],void 0)?d[111]=c.i64.to_string(d[87]):d[111]=void 0,d[57].set(d[110],d[111])):0,d[56]=d[57]):(d[47]==="XMSGProductHighlightExtras"?(d[58]=new c.Map(),d[61]="product_highlight_type",d[59]=d[39].get(d[61]),d[59]!==void 0?d[58].set(d[61],d[59]):0,d[62]="conversation_marker",d[60]=d[39].get(d[62]),d[60]!==void 0?d[58].set(d[62],d[60]):0,d[57]=d[58]):(d[47]==="XMSGMagicMessengerExtras"?(d[59]=new c.Map(),d[61]="is_magic_thread",d[60]=d[39].get(d[61]),d[60]!==void 0?d[59].set(d[61],d[60]):0,d[58]=d[59]):(d[47]==="XMSGAdsAIExtras"?(d[60]=new c.Map(),d[64]="context",d[61]=d[39].get(d[64]),d[61]!==void 0?d[60].set(d[64],d[61]):0,d[65]="is_reply_to_ads_ai",d[62]=d[39].get(d[65]),d[62]!==void 0?d[60].set(d[65],d[62]):0,d[66]="is_message_processed_by_lightspeed",d[63]=d[39].get(d[66]),d[63]!==void 0?d[60].set(d[66],d[63]):0,d[59]=d[60]):(d[47]==="XMSGBizappExtras"?(d[61]=new c.Map(),d[64]="message_source",d[62]=d[39].get(d[64]),d[62]!==void 0?d[61].set(d[64],d[62]):0,d[65]="message_trigger",d[63]=d[39].get(d[65]),d[63]!==void 0?d[61].set(d[65],d[63]):0,d[60]=d[61]):d[60]=d[39],d[59]=d[60]),d[58]=d[59]),d[57]=d[58]),d[56]=d[57]),d[55]=d[56]),d[54]=d[55]),d[53]=d[54]),d[52]=d[53]),d[51]=d[52]),d[50]=d[51]),d[49]=d[50]),d[48]=d[49]),d[48].set("__typename",d[47]),d[44]=d[48]),d[45]=d[44].keys(),d[46]=c.i64.of_int32(d[45].length),c.i64.neq(d[46],c.i64.cast([0,0]))?d[37].set(d[42],d[44]):0),d[34]=d[37]),d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[30],d[34]):0),d[31]="logging_metadata",d[25]=d[21].get(d[31]),d[25]?d[26]=!1:d[26]=!0,d[26]?c.resolve():c.sequence([function(a){return d[25]?d[33]=!1:d[33]=!0,d[33]?c.resolve(d[34]=void 0):c.sequence([function(a){return d[37]=new c.Map(),d[42]="feature_tags",d[38]=d[25].get(d[42]),d[38]?d[39]=!1:d[39]=!0,d[39]?0:(d[44]=c.i64.of_int32(d[38].length),c.i64.neq(d[44],c.i64.cast([0,0]))?d[37].set(d[42],d[38]):0),d[43]="content_model",d[40]=d[25].get(d[43]),d[40]?d[41]=!1:d[41]=!0,d[41]?c.resolve():c.sequence([function(a){return d[40]?d[44]=!1:d[44]=!0,d[44]?c.resolve(d[45]=void 0):c.sequence([function(a){return d[48]=new c.Map(),d[59]="hashed_content",d[49]=d[40].get(d[59]),d[49]!==void 0?d[48].set(d[59],d[49]):0,d[60]="hashed_product_extras",d[50]=d[40].get(d[60]),d[50]!==void 0?d[48].set(d[60],d[50]):0,d[61]="client_metadata",d[51]=d[40].get(d[61]),d[51]?d[52]=!1:d[52]=!0,d[52]?0:(d[51]?d[65]=!1:d[65]=!0,d[65]?d[66]=void 0:(d[69]=d[51].get("__typename"),d[69]==="XMSGStoriesClientMetadata"?(d[71]=new c.Map(),d[73]="story_reply_type",d[72]=d[51].get(d[73]),d[72]!==void 0?d[71].set(d[73],d[72]):0,d[70]=d[71]):d[70]=d[51],d[70].set("__typename",d[69]),d[66]=d[70]),d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[61],d[66]):0),d[62]="client_extras",d[53]=d[40].get(d[62]),d[53]?d[54]=!1:d[54]=!0,d[54]?0:(d[53]?d[65]=!1:d[65]=!0,d[65]?d[66]=void 0:(d[69]=d[53].get("__typename"),d[69]==="XMSGMarketplaceClientExtras"?(d[71]=new c.Map(),d[79]="initial_clicked_component",d[72]=d[53].get(d[79]),d[72]!==void 0?d[71].set(d[79],d[72]):0,d[80]="initial_tracking",d[73]=d[53].get(d[80]),d[73]!==void 0?d[71].set(d[80],d[73]):0,d[81]="referral_surface",d[74]=d[53].get(d[81]),d[74]!==void 0?d[71].set(d[81],d[74]):0,d[82]="referral_story_type",d[75]=d[53].get(d[82]),d[75]!==void 0?d[71].set(d[82],d[75]):0,d[83]="referral_ui_component",d[76]=d[53].get(d[83]),d[76]!==void 0?d[71].set(d[83],d[76]):0,d[84]="surface",d[77]=d[53].get(d[84]),d[77]!==void 0?d[71].set(d[84],d[77]):0,d[85]="ui_component",d[78]=d[53].get(d[85]),d[78]!==void 0?d[71].set(d[85],d[78]):0,d[70]=d[71]):d[70]=d[53],d[70].set("__typename",d[69]),d[66]=d[70]),d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[62],d[66]):0),d[63]="containing_post",d[55]=d[40].get(d[63]),d[55]?d[56]=!1:d[56]=!0,d[56]?c.resolve():c.sequence([function(a){return d[55]?d[65]=!1:d[65]=!0,d[65]?c.resolve(d[66]=void 0):c.sequence([function(a){return d[69]=new c.Map(),d[77]="key_type",d[70]=d[55].get(d[77]),d[70]!==void 0?d[69].set(d[77],d[70]):0,d[78]="fb_post_type",d[71]=d[55].get(d[78]),d[71]?d[72]=!1:d[72]=!0,d[72]?0:(d[81]=c.i64.of_int32(d[71].length),c.i64.neq(d[81],c.i64.cast([0,0]))?d[69].set(d[78],d[71]):0),d[79]="photos",d[73]=d[55].get(d[79]),d[73]?d[74]=!1:d[74]=!0,d[74]?c.resolve():c.sequence([function(a){return d[73]?d[81]=!1:d[81]=!0,d[81]?c.resolve(d[82]=void 0):c.sequence([function(a){return d[84]=c.createArray(),d[85]=c.i64.of_int32(d[73].length),c.i64.gt(d[85],c.i64.cast([0,0]))?c.loopAsync(d[85],function(a){return d[86]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[73],d[86]).then(function(a){return a=a,d[87]=a[0],d[88]=a[1],a})},function(a){return d[89]=new c.Map(),d[91]="key_type",d[90]=d[87].get(d[91]),d[90]!==void 0?d[89].set(d[91],d[90]):0,d[92]=(d[84].push(d[89]),d[84])}])}):c.resolve()},function(a){return d[82]=d[84]}])},function(a){return d[83]=c.i64.of_int32(d[82].length),c.i64.neq(d[83],c.i64.cast([0,0]))?d[69].set(d[79],d[82]):0}])},function(a){return d[80]="videos",d[75]=d[55].get(d[80]),d[75]?d[76]=!1:d[76]=!0,d[76]?c.resolve():c.sequence([function(a){return d[75]?d[81]=!1:d[81]=!0,d[81]?c.resolve(d[82]=void 0):c.sequence([function(a){return d[84]=c.createArray(),d[85]=c.i64.of_int32(d[75].length),c.i64.gt(d[85],c.i64.cast([0,0]))?c.loopAsync(d[85],function(a){return d[86]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[75],d[86]).then(function(a){return a=a,d[87]=a[0],d[88]=a[1],a})},function(a){return d[89]=new c.Map(),d[91]="key_type",d[90]=d[87].get(d[91]),d[90]!==void 0?d[89].set(d[91],d[90]):0,d[92]=(d[84].push(d[89]),d[84])}])}):c.resolve()},function(a){return d[82]=d[84]}])},function(a){return d[83]=c.i64.of_int32(d[82].length),c.i64.neq(d[83],c.i64.cast([0,0]))?d[69].set(d[80],d[82]):0}])},function(a){return d[66]=d[69]}])},function(a){return d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[63],d[66]):0}])},function(a){return d[64]="metadata",d[57]=d[40].get(d[64]),d[57]?d[58]=!1:d[58]=!0,d[58]?0:(d[57]?d[65]=!1:d[65]=!0,d[65]?d[66]=void 0:(d[69]=d[57].get("__typename"),d[69]==="XMSGGroupsContentLoggingMetadata"?(d[71]=new c.Map(),d[73]="num_members",d[72]=d[57].get(d[73]),c.i64.neq(d[72],void 0)?d[71].set(d[73],d[72]):0,d[70]=d[71]):(d[69]==="XMSGStoriesContentLoggingMetadata"?(d[72]=new c.Map(),d[77]="author",d[73]=d[57].get(d[77]),d[73]?d[74]=!1:d[74]=!0,d[74]?0:(d[73]?d[80]=!1:d[80]=!0,d[80]?d[81]=void 0:(d[84]=new c.Map(),d[87]="profile",d[85]=d[73].get(d[87]),d[85]?d[86]=!1:d[86]=!0,d[86]?0:(d[85]?d[88]=!1:d[88]=!0,d[88]?d[89]=void 0:(d[92]=new c.Map(),d[94]="id",d[93]=d[85].get(d[94]),d[93]!==void 0?d[92].set(d[94],d[93]):0,d[89]=d[92]),d[90]=d[89].keys(),d[91]=c.i64.of_int32(d[90].length),c.i64.neq(d[91],c.i64.cast([0,0]))?d[84].set(d[87],d[89]):0),d[81]=d[84]),d[82]=d[81].keys(),d[83]=c.i64.of_int32(d[82].length),c.i64.neq(d[83],c.i64.cast([0,0]))?d[72].set(d[77],d[81]):0),d[78]="post_source",d[75]=d[57].get(d[78]),d[75]!==void 0?d[72].set(d[78],d[75]):0,d[79]="story_type",d[76]=d[57].get(d[79]),d[76]!==void 0?d[72].set(d[79],d[76]):0,d[71]=d[72]):d[71]=d[57],d[70]=d[71]),d[70].set("__typename",d[69]),d[66]=d[70]),d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[64],d[66]):0),d[45]=d[48]}])},function(a){return d[46]=d[45].keys(),d[47]=c.i64.of_int32(d[46].length),c.i64.neq(d[47],c.i64.cast([0,0]))?d[37].set(d[43],d[45]):0}])},function(a){return d[34]=d[37]}])},function(a){return d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[31],d[34]):0}])},function(a){return d[32]="send_instance_metadata",d[27]=d[21].get(d[32]),d[27]?d[28]=!1:d[28]=!0,d[28]?0:(d[27]?d[33]=!1:d[33]=!0,d[33]?d[34]=void 0:(d[37]=new c.Map(),d[40]="send_instance_id",d[38]=d[27].get(d[40]),d[38]!==void 0?d[37].set(d[40],d[38]):0,d[41]="send_instance_group_size",d[39]=d[27].get(d[41]),c.i64.neq(d[39],void 0)?d[37].set(d[41],d[39]):0,d[34]=d[37]),d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[32],d[34]):0),d[29]=c.toJSON(d[22]),d[10]=d[29]}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[11]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[11]=d[20])})},function(e){return d[13]=new c.Map(),d[13].set("thread_key",a[0]),d[13].set("timestamp_ms",a[1]),d[13].set("message_id",a[2]),d[13].set("actor_id",a[3]),d[13].set("reaction",a[4]),d[13].set("reaction_style",void 0),d[13].set("sync_group",d[11]),d[13].set("send_attribution",a[5]),d[13].set("dataclass_params",d[10]),d[13].set("attachment_fbid",void 0),d[14]=c.createArray(),d[15]=(d[14].push("reaction"),d[14]),d[16]=d[13].get("message_id"),d[17]=(d[14].push(d[16]),d[14]),d[18]=c.toJSON(d[14]),d[19]=c.toJSON(d[13]),c.storedProcedure(b("LSIssueNewTask"),d[18],c.i64.cast([0,29]),d[19],void 0,void 0,a[6]==null?c.i64.cast([0,0]):a[6],c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticUpsertReactionStoredProcedure",["LSOptimisticUpsertReaction","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticUpsertReaction"),e.threadKey,e.timestampMs,e.messageId,e.actorId,e.reaction,e.sendAttribution,e.pluginType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSUpdateOrInsertReactionV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(226).fetch([[[a[0],a[1],a[2]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(12).fetch([[[a[1]]],"messageId"]).next().then(function(d,e){var c=d.done;d=d.value;return c?0:(e=d.item,b.sequence([function(c){return b.forEach(b.filter(b.db.table(226).fetch([[[a[0],a[1],a[2]]],"optimistic"]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.reactionFbid,a[2])&&b.i64.lt(c.authorityLevel,a[5])}),function(a){return a["delete"]()})},function(c){return b.db.table(226).add({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.timestampMs,authorityLevel:a[5],count:a[4],viewerIsReactor:a[6],viewerReactionTimestampMs:a[7],lastUpdatedTimestampMs:a[8]})}]))}):(e=d.item,c[2]=e.lastUpdatedTimestampMs,c[1]=e.authorityLevel,b.i64.eq(a[5],b.i64.cast([0,20]))||b.i64.eq(c[1],b.i64.cast([0,80]))&&b.i64.eq(a[5],b.i64.cast([0,80]))||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(b.i64.add(c[2],b.i64.cast([0,2e3])),a[8])||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,60]))||b.i64.eq(c[1],b.i64.cast([0,60]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(c[2],a[8])?c[3]=!0:c[3]=!1,c[3]?b.db.table(226).put({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.messageTimestamp,reactionLiteral:a[3],count:a[4],authorityLevel:a[5],viewerIsReactor:a[6],viewerReactionTimestampMs:b.i64.cast([0,0]),lastUpdatedTimestampMs:a[8]}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpdateOrInsertReactionV2StoredProcedure";a.__tables__=["reactions_v2","messages"];e.exports=a}),null);
__d("LSOptimisticUpsertReactionV2",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTaskWithExtraOperations","LSUpdateOrInsertReactionV2","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.i64.eq(a[8],c.i64.cast([0,2]))?c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[16]=c.i64.cast([0,1]):(b=a.item,d[25]=b.syncGroup,c.i64.neq(d[25],void 0)?d[24]=d[25]:d[24]=c.i64.cast([0,1]),d[16]=d[24])})},function(e){return d[18]=new c.Map(),d[18].set("thread_id",a[1]),d[18].set("message_id",a[2]),d[18].set("message_timestamp",a[3]),d[18].set("actor_id",a[0]),d[18].set("reaction_fbid",a[4]),d[18].set("reaction_style",a[7]),d[18].set("operation",a[8]),d[18].set("viewer_is_reactor",a[6]),d[18].set("current_count",a[5]),d[18].set("reaction_literal",a[9]),d[18].set("sync_group",d[16]),d[19]=c.createArray(),d[20]=(d[19].push("reaction_v2"),d[19]),d[21]=d[18].get("message_id"),d[22]=(d[19].push(d[21]),d[19]),d[23]=c.toJSON(d[19]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[23],c.i64.cast([0,604]))}]):c.resolve()},function(e){return[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[0]=c.i64.add(a[5],c.i64.cast([-1,4294967295])):d[0]=c.i64.add(a[5],c.i64.cast([0,1])),[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[1]=!1:d[1]=!0,d[2]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpdateOrInsertReactionV2"),a[1],a[2],a[4],a[9],d[0],c.i64.cast([0,20]),d[1],c.i64.cast([0,0]),d[2])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=void 0:(b=a.item,d[3]=b.threadType)})},function(e){return c.i64.neq(d[3],c.i64.cast([0,23]))?[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?c.i64.eq(a[8],c.i64.cast([0,2]))?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.sequence([function(b){return c.filter(c.db.table(8).fetch([[[a[1],a[2],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]&&c.i64.eq(b.actorId,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[16]=void 0:(b=a.item,d[16]=b.reaction)})},function(e){return a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[18]="\u2764":d[18]=a[9],d[18]===d[16]?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.resolve()):c.resolve()}]):a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[16]="\u2764":d[16]=a[9],d[17]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpsertReaction"),a[1],a[3],a[2],a[0],d[16],c.i64.cast([0,20]),d[17])):c.resolve():c.resolve()},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[5]=c.i64.cast([0,1]):(b=a.item,d[17]=b.syncGroup,c.i64.neq(d[17],void 0)?d[16]=d[17]:d[16]=c.i64.cast([0,1]),d[5]=d[16])})},function(b){return d[7]=new c.Map(),d[7].set("thread_id",a[1]),d[7].set("message_id",a[2]),d[7].set("message_timestamp",a[3]),d[7].set("actor_id",a[0]),d[7].set("reaction_fbid",a[4]),d[7].set("reaction_style",a[7]),d[7].set("current_count",a[5]),d[7].set("viewer_is_reactor",a[6]),d[7].set("operation",a[8]),d[7].set("reaction_literal",a[9]),d[7].set("entry_point",void 0),d[7].set("sync_group",d[5]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?d[8]=!1:(e=b.item,c.sequence([function(b){return c.filter(c.db.table(14).fetch([[[e.threadKey,a[0]]]]),function(b){return c.i64.eq(b.threadKey,e.threadKey)&&c.i64.eq(c.i64.cast([0,0]),e.mailboxType)&&c.i64.eq(b.contactId,a[0])}).next().then(function(b,f){var a=b.done;b=b.value;return a?d[16]=!1:(f=b.item,c.i64.eq(e.threadType,c.i64.cast([0,152]))?(d[19]=f.threadRoles,c.i64.lt(c.i64.cast([0,7]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,7]),c.i64.cast([0,7]))?d[20]=!1:d[20]=!c.i64.eq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[19]),c.i64.cast([0,0])),d[21]=e.capabilities,d[22]=e.capabilities2,d[23]=e.capabilities3,d[24]=e.capabilities4,d[25]=e.capabilities5,d[27]=c.i64.div(c.i64.cast([0,223]),c.i64.cast([0,64])),d[28]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.sub(c.i64.cast([0,223]),c.i64.mul(d[27],c.i64.cast([0,64]))))),c.i64.lt(c.i64.cast([0,223]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,223]),c.i64.cast([0,269]))?d[26]=!1:(c.i64.eq(d[27],c.i64.cast([0,0]))?d[29]=!c.i64.eq(c.i64.and_(d[28],d[21]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,1]))?d[30]=!c.i64.eq(c.i64.and_(d[28],d[22]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,2]))?d[31]=!c.i64.eq(c.i64.and_(d[28],d[23]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,3]))?d[32]=!c.i64.eq(c.i64.and_(d[28],d[24]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,4]))?d[33]=!c.i64.eq(c.i64.and_(d[28],d[25]),c.i64.cast([0,0])):d[33]=!1,d[32]=d[33]),d[31]=d[32]),d[30]=d[31]),d[29]=d[30]),d[26]=d[29]),d[20]===d[26]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),c["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[18]=d[20]):d[18]=!1,d[16]=d[18])})},function(a){return d[8]=d[16]}]))})},function(a){return d[8]?d[7].set("perform_action_as_page",!0):0,d[10]=c.createArray(),d[11]=(d[10].push("reaction_v2"),d[10]),d[12]=d[7].get("message_id"),d[13]=(d[10].push(d[12]),d[10]),d[14]=c.toJSON(d[10]),d[15]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),d[14],c.i64.cast([0,604]),d[15],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionV2StoredProcedure";a.__tables__=["threads","reactions","participants"];e.exports=a}),null);
__d("LSOptimisticUpsertReactionV2StoredProcedure",["LSOptimisticUpsertReactionV2","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticUpsertReactionV2"),e.actorId,e.threadId,e.messageId,e.messageTimestamp,e.reactionFbid,e.currentCount,e.viewerIsReactor,e.reactionStyle,e.operation,e.reactionLiteral);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSubmitGenAIBotFeedback",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("bot_feedback_kind",a[0]),d[0].set("bot_response_id",a[2]),d[0].set("feedback_kind_type",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"submit_gen_ai_bot_feedback",c.i64.cast([0,756]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))},function(b){return c.db.table(315).fetch([[[a[2]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[2]=c.i64.cast([0,0]):(b=a.item,d[2]=b.feedbackSubmissionStatus)})},function(b){return c.i64.eq(d[2],c.i64.cast([0,0]))?c.db.table(315).add({botResponseId:a[2],feedbackSubmissionStatus:c.i64.cast([0,1]),feedbackKindType:a[0]}):c.forEach(c.db.table(315).fetch([[[a[2]]]]),function(b){var d=b.update;b.item;return d({feedbackSubmissionStatus:c.i64.cast([0,1]),feedbackKindType:a[0]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxSubmitGenAIBotFeedbackStoredProcedure";a.__tables__=["ai_bot_feedback_submission_status"];e.exports=a}),null);
__d("LSSubmitGenAIBotFeedbackStoredProcedure",["LSSubmitGenAIBotFeedback","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSubmitGenAIBotFeedback"),e.botFeedbackKind,e.feedbackKindType,e.botResponseId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSThreadAttributionTypeUtil",["I64","LSIntEnum","LSMessagingThreadAttributionType","LSThreadAttributionStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){b=d("LSThreadAttributionStore").getSourceWithoutReset({type:"MWLSEntrypoint",value:b},(h||(h=d("I64"))).to_string(a));return j(b)}function b(a,b){b=d("LSThreadAttributionStore").getSourceAndResetAttribution({type:"MWLSEntrypoint",value:b},(h||(h=d("I64"))).to_string(a));return j(b)}function j(a){if(a.type==="LSThreadAttribution")return a.value;a=a.value;if(a==="communityFriendsDialog"||a==="pagesHomeFriendsDialog"||a==="mutualFriendsDialog"||a==="birthday"||a==="groupMembers"||a==="fundraiserSupportersList"||a==="memories"||a==="feedPoll"||a==="reactorList"||a==="friendsList"||a==="pagesPrivateReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST);else if(a==="inboxPendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_PENDING_REQUESTS);else if(a==="fullscreenChat")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT);else if(a==="sidebarGroupsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_GROUPS);else if(a==="jewel")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_THREAD_LIST);else if(a==="shop")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MINI_SHOP_VIEW_MENU_BUTTON);else if(a==="chatheadsOverflow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_OVERFLOW);else if(a==="hovercard"||a==="feedDynamicHoverCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_DYNAMIC_HOVER_CARD);else if(a==="search"||a==="messengerUniversalSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_UNIVERSAL_SEARCH);else if(a==="story"||a==="storyAggregatedUsers"||a==="storySeenByList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY);else if(a==="timeline"||a==="feedOrganicPost")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST);else if(a==="pageAboutCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_ABOUT_CARD);else if(a==="inboxInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_IN_THREAD);else if(a==="notificationInThreadReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_NOTIFICATION_IN_THREAD_REPLY);else if(a==="archieve")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_ARCHIVED_THREADS);else if(a==="storyViewerSheetRow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY_VIEWER_SHEET_ROW);else if(a==="chatheadsNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_NEW_MESSAGE);else if(a==="event")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_EVENT);else if(a==="jewelSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_SEARCH);else if(a==="inboxSpam"||a==="inboxThreadList"||a==="inboxRestricted")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX);else if(a==="jewelNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NEW_MESSAGE);else if(a==="pendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST);else if(a==="sidebarSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_SEARCH);else if(a==="inboxRemainingThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_REMAINING_THREADS);else if(a==="pagesHeader")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON);else if(a==="inboxRecentThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_RECENT_THREADS);else if(a==="chatheads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS);else if(a==="pageResponsivenessCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_RESPONSIVENESS_CONTEXT_CARD);else if(a==="inboxSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_MESSAGE_SEARCH);else if(a==="jewelNestedFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NESTED_FOLDER);else if(a==="marketplace")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MARKETPLACE_SEND_MESSAGE);else if(a==="feedOrganicPostViewAndMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE);else if(a==="adsCta")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA);else if(a==="chatInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_CHAT_IN_THREAD);else if(a==="payments")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").PAYMENTS);else if(a==="inboxFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_NESTED_FOLDER);else if(a==="inboxArchived")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ARCHIVED_THREADS);else if(a==="inboxActiveContacts")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ACTIVE_CONTACTS);else if(a==="sidebarContactsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_LIST);else if(a==="sidebarCommunityChatsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_COMMUNITY_CHATS);else if(a==="igdChatTabsThreadView")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").IGD_WEB_CHAT_TAB_IN_THREAD);else if(a==="inboxTrayActiveNow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW);else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN)}g.getSourceWithoutReset=a;g.getSourceAndResetAttribution=b}),98);
__d("MAWEditMessageContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;e=b.createContext;var j=b.useMemo,k=b.useState;function a(a){a=a.children;var b=k(null),c=b[0],d=b[1];b=j(function(){return{editMessageData:c,setEditMessageData:d}},[c,d]);return i.jsx(l.Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";var l=e({editMessageData:null,setEditMessageData:c("emptyFunction")});g.MAWEditMessageContext=a;g.Context=l}),98);
__d("MWChatFilePreProcessingErrorToast.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._(/*BTDS*/"__JHASH__rp1B2ks3qwV__JHASH__"),title:h._(/*BTDS*/"__JHASH__xqsOpg5ebEg__JHASH__")};g.invalidFileFormat=a}),226);
__d("MWChatFileUploadErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return{body:h._(/*BTDS*/"__JHASH__Tr8urrZ1rc1__JHASH__",[h._param("size",a)]),title:h._(/*BTDS*/"__JHASH__GVmFuh2jycz__JHASH__")}};b=function(a){return{body:h._(/*BTDS*/"__JHASH__TAA-hbgGa5n__JHASH__",[h._param("limit",a)]),title:h._(/*BTDS*/"__JHASH__L_Ni3O-TarB__JHASH__")}};c=function(a){return{body:h._(/*BTDS*/"__JHASH__-3D7kzgvAq5__JHASH__",[h._param("limit",a)]),title:h._(/*BTDS*/"__JHASH__syTHdrAlZYC__JHASH__")}};d=function(){return{body:h._(/*BTDS*/"__JHASH__1WylqAbhvtc__JHASH__"),title:h._(/*BTDS*/"__JHASH__hio_8S892IQ__JHASH__")}};g.maxFileSizeExceeded=a;g.maxFilesNumberExceeded=b;g.maxMediaNumberExceeded=c;g.unsupportedFile=d}),226);
__d("MWMediaComposerRenderQpl",["LSGetAttachmentType","MAWLoggerUtils","MWMediaRenderQplUtils","QPLUserFlow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=i.useEffect,k=i.useMemo,l=i.useRef;function a(a,b,e){var f;a=d("MAWLoggerUtils").getInstanceKeyFromId(a);b=d("LSGetAttachmentType").LSGetAttachmentTypeSyncButLessAccurate(b);c("QPLUserFlow").start((f=d("MWMediaRenderQplUtils")).event,{annotations:{string:{attachment_type:f.getAttachmentTypeStringFromEnum(b),content_type:f.deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(b),entry_point:"composer_view",thread_type:f.getThreadTypeString(e)}},cancelOnUnload:!0,instanceKey:a,timeoutInMs:f.QPL_TIMEOUT})}function b(a,b){a=d("MAWLoggerUtils").getInstanceKeyFromId(a);c("QPLUserFlow").endCancel(d("MWMediaRenderQplUtils").event,{annotations:{string:{cancel_reason:b}},instanceKey:a})}function e(a,b){a=d("MAWLoggerUtils").getInstanceKeyFromId(a);c("QPLUserFlow").addPoint(d("MWMediaRenderQplUtils").event,b,{instanceKey:a})}function f(a){var b=d("MAWLoggerUtils").getInstanceKeyFromId(a.offlineAttachmentId),e=l(!1);c("QPLUserFlow").addAnnotations(d("MWMediaRenderQplUtils").event,{string:{attachment_type:d("MWMediaRenderQplUtils").getAttachmentTypeStringFromEnum(a.attachmentType),content_type:d("MWMediaRenderQplUtils").deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(a.attachmentType)}},{instanceKey:b});var f=k(function(){return babelHelpers["extends"]({},d("MWMediaRenderQplUtils").createQplFlowCommon(d("MWMediaRenderQplUtils").event,b,e))},[]);j(function(){return function(){e.current===!1&&(f==null?void 0:f.getInstanceKey())!=null&&(f==null?void 0:f.endCancel(706))}},[f]);return f}g.startMediaComposerRenderQpl=a;g.endCancelMediaComposerRenderQpl=b;g.addPointMediaComposerRenderQpl=e;g.useMediaComposerRenderQpl=f}),98);
__d("MWSharedMediaManagerUtils",["I64","LSGetAttachmentType","LSIntEnum","LSMailboxType","MWPreloadableQueries","Promise","ReQLSuspense","asyncToGeneratorRuntime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){return new(k||(k=b("Promise")))(function(b){var c=new Image();c.onload=function(){return b({previewHeight:c.height,previewWidth:c.width})};c.onerror=function(){return b()};c.src=a})}function m(a){return new(k||(k=b("Promise")))(function(b){var c=document.createElement("video");c.onloadedmetadata=function(){return b({previewHeight:c.videoHeight,previewWidth:c.videoWidth})};c.onerror=function(){return b()};c.src=a})}function n(a,b){if(b==null||a==null)return;var c=Math.floor(a.previewHeight*b.previewWidth/a.previewWidth);return c>=b.previewHeight?{previewHeight:(i||(i=d("I64"))).of_float(c),previewWidth:i.of_float(b.previewWidth)}:{previewHeight:(i||(i=d("I64"))).of_float(b.previewHeight),previewWidth:i.of_float(a.previewWidth*b.previewHeight/a.previewHeight)}}function a(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d){var e=(yield q(c,d));yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield s(a,e));yield (k||(k=b("Promise"))).all(c.map(function(b){return a.media_staging.add(b)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":102")});return o.apply(this,arguments)}function e(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d){var e=(yield q(c,d));yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield s(a,e));yield (k||(k=b("Promise"))).all(c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){(yield a.media_staging.get(c.offlineAttachmentId))!=null&&(yield a.media_staging.upsert([c.offlineAttachmentId],c));return(k||(k=b("Promise"))).resolve()});return function(a){return c.apply(this,arguments)}}()))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":126")});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=(yield (k||(k=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.file,f=a.offlineAttachmentId,g=a.attachmentType!=null?(j||(j=d("LSIntEnum"))).ofNumber(a.attachmentType):yield d("LSGetAttachmentType").LSGetAttachmentType(b),h=URL.createObjectURL(b),k;a.previewHeight!=null&&a.previewWidth!=null?k={previewHeight:a.previewHeight,previewWidth:a.previewWidth}:b.type.includes("video/")?k=(yield m(h)):k=(yield l(h));g={attachmentType:g,durationMs:void 0,fbid:void 0,filename:b.name,fileSize:(i||(i=d("I64"))).of_int32(b.size),hasError:!1,isHd:a.isHd,isSent:!1,mailboxType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),mimeType:b.type,offlineAttachmentId:f,offlineThreadingId:void 0,previewUrl:h,progress:0,threadKey:e};return{dimensions:k,mediaStaging:g}});return function(b){return a.apply(this,arguments)}}())));return a});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield a.sync_groups.get((i||(i=d("I64"))).of_float(1)));var c;if((a==null?void 0:a.syncParams)!=null){a=JSON.parse(a.syncParams);var e=a.preview_height;a=a.preview_width;c={previewHeight:e,previewWidth:a}}return b.map(function(a){var b=a.dimensions;a=a.mediaStaging;return babelHelpers["extends"]({},a,n(b,c))})});return t.apply(this,arguments)}function u(a,b){return a.runInTransaction(function(a){return a.media_staging["delete"](b)},"readwrite",void 0,void 0,f.id+":236")}function v(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){return d("MWPreloadableQueries").getMediaStagingQuery(b,a.threadKey)},[b,a.threadKey],f.id+":246")}function w(a){if(a.mimeType==="image/gif")return!0;else return a.mimeType==="image/webp"}function x(a){return a.mimeType==="image/gif"}g.insertMediaStaging=a;g.updateMediaStaging=e;g.deleteMediaStaging=u;g.useMediaStaging=v;g.isVideoLikeImage=w;g.isGIFImage=x}),98);
__d("WorkFailedSendMessageFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6352");b=d("FalcoLoggerInternal").create("work_failed_send_message",a);e=b;g["default"]=e}),98);
__d("useCometAlertDialog",["FDSDialogLoadingState.react","react","requireDeferred","useCometDeferredDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k=c("requireDeferred")("FDSAlertDialogImpl.react").__setRef("useCometAlertDialog");function l(){return i.jsx(c("FDSDialogLoadingState.react"),{})}l.displayName=l.name+" [from "+f.id+"]";function a(){var a=c("useCometDeferredDialog")(k,l);return j(function(b,c,d){c===void 0&&(c=function(){}),a(b,c,d)},[a])}g["default"]=a}),98);
__d("useMWXAlertDialog",["react","useCometAlertDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useCometAlertDialog")();return i(function(b,c,d){a(babelHelpers["extends"]({body:b.body},b),c,d)},[a])}g["default"]=a}),98);
__d("MWMediaManager",["FBLogger","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MWChatFilePreProcessingErrorToast.react","MWChatFileUploadErrorDialog.react","MWMediaComposerRenderQpl","MWPActor.react","MWPBumpEntityKey","MWSharedMediaManagerUtils","MessagingAttachmentType","OfflineThreadingId","Promise","WorkFailedSendMessageFalcoEvent","cr:8525","emptyFunction","gkx","promiseDone","requireDeferred","useMWXAlertDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("requireDeferred")("MWOpenMediaManagerUtils").__setRef("MWMediaManager"),m=function(){if(b("cr:8525")==null){c("FBLogger")("messenger_web_media").warn("Unsupported thread type for media upload");return(k||(k=b("Promise"))).resolve(null)}return b("cr:8525").load()},n=c("gkx")("24138")?75:25;function o(a,c,d){if(c)return m().then(function(c){return(k||(k=b("Promise"))).resolve((c=c==null?void 0:c.preprocessV2(a,d))!=null?c:[])});else return l.load().then(function(b){return b.preprocess(a)})}function p(a,b,c){for(var e=0;e<a.length;e++){var f=a[e],g=c(f,b);if(f.size>g*1024*1024){f=q(f.size);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("media_sends","file_size_exceeded."+(b?"secure":"open"));d("MWPBumpEntityKey").bumpEntityKeyWithAppId("media_sends","file_size_exceeded."+(b?"secure":"open")+"."+f);return g}}return null}function q(a){return a<=30*1024*1024?"30MB":a<=50*1024*1024?"50MB":a<=75*1024*1024?"75MB":a<=100*1024*1024?"100MB":a<=150*1024*1024?"150MB":a<=200*1024*1024?"200MB":a<=250*1024*1024?"250MB":a<=500*1024*1024?"500MB":a<=1024*1024*1024?"1GB":"1GB+"}function a(a){var e=a.chatSupportUserId,f=a.chatSupportUserNonce,g=a.getMaxAttachmentSizeInMB,q=g===void 0?function(){return n}:g,r=a.isChatSupportUser,s=a.maxNumberOfAttachments,t=a.onUploadFailure,u=a.onUploadStart,v=a.onUploadSuccess,w=a.showUploadFailureToast,x=a.thread,y=a.validateFileName,z=(j||(j=c("useReStore")))(),A=c("useMWXAlertDialog")(),B=d("LSMessagingThreadTypeUtil").isArmadilloSecure(x.threadType),C=d("MWSharedMediaManagerUtils").useMediaStaging(x),D=C.length,E=d("MWPActor.react").useActor();g=d("Int64Hooks").useCallbackInt64(function(a,g){var i=p(a,B,q);if(i!=null){A(d("MWChatFileUploadErrorDialog.react").maxFileSizeExceeded(i),c("emptyFunction"));return}if(s!=null&&D+a.length>s){c("gkx")("23249")?(A(d("MWChatFileUploadErrorDialog.react").maxFilesNumberExceeded(s),c("emptyFunction")),c("WorkFailedSendMessageFalcoEvent").log(function(){return{breaking_rule:"",event:"NUMBER_OF_ATTACHMENTS_LIMIT_REACHED"}})):A(d("MWChatFileUploadErrorDialog.react").maxMediaNumberExceeded(s),c("emptyFunction"));return}if(y!=null)for(i=0;i<a.length;i++){var j=a[i];if(!y(j)){A(d("MWChatFileUploadErrorDialog.react").unsupportedFile(),c("emptyFunction"));return}}var n=d("OfflineThreadingId").createForItemsInOrder(a);n.forEach(function(a){var b=a[0];a=a[1];d("MWMediaComposerRenderQpl").startMediaComposerRenderQpl(a,b,x);d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a,"preprocess_start")});c("promiseDone")(o(n,B,g)["catch"](function(){w(d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.title,d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.body);n.forEach(function(a){a[0];a=a[1];d("MWMediaComposerRenderQpl").endCancelMediaComposerRenderQpl(a,"invalid-file-format")});return(k||(k=b("Promise"))).resolve([])}).then(function(a){a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"preprocess_success")});c("promiseDone")(d("MWSharedMediaManagerUtils").insertMediaStaging(z,a,x.threadKey));a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"media_staging_insert_success")});var b=x.threadKey;return B?m().then(function(c){return c==null?void 0:c.upload(z,b,a)}):l.load().then(function(c){return c.upload(z,b,a,w,u,v,t,r,e,f,(h||(h=d("I64"))).to_string(E))})}))},[E,e,f,z,q,r,B,s,D,t,u,v,A,w,x,y]);a=function(a){c("promiseDone")(d("MWSharedMediaManagerUtils").deleteMediaStaging(z,a).then(function(){if(B&&b("cr:8525")!=null)return b("cr:8525").load().then(function(b){b.MAWMediaManagerAttachmentsV2["delete"](a)})}))};var F=function(){var a=C.map(function(a){return a.offlineAttachmentId});a.forEach(function(a){d("MWSharedMediaManagerUtils").deleteMediaStaging(z,a)["catch"](function(a){c("FBLogger")("messenger_web_media").catching(a).mustfix("Error deletting media staging.")})})},G=d("Int64Hooks").useCallbackInt64(function(a){if(!B)return;c("promiseDone")(m().then(function(e){if(e==null)return;var f=C.map(function(a){var b;if(!(h||(h=d("I64"))).equal(a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return null;b=(b=e.MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId))==null?void 0:b.originalFile;if(b==null)return null;b=[b,a.offlineAttachmentId];return b}).filter(Boolean);if(f.length===0)return;c("promiseDone")(o(f,B,a)["catch"](function(){w(d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.title,d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.body);f.forEach(function(a){a[0];a=a[1];d("MWMediaComposerRenderQpl").endCancelMediaComposerRenderQpl(a,"invalid-file-format")});return(k||(k=b("Promise"))).resolve([])}).then(function(a){a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"preprocess_success")});c("promiseDone")(d("MWSharedMediaManagerUtils").updateMediaStaging(z,a,x.threadKey));a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"media_staging_insert_success")});var b=x.threadKey;return e==null?void 0:e.upload(z,b,a)}))}))});return{handleFileRemove:a,handleFileSelect:g,mediaStaging:C,onHdMediaToggled:G,resetAttachments:F}}g.convertIntegerSizeToStringBucket=q;g.useMediaManager=a}),98);
__d("getMessengerPreciseTimestamp",["$InternalEnum","formatDate"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum").Mirrored(["TODAY","WEEK_AGO","CURRENT_YEAR","OTHER_YEAR"]);d=864e5;var i=6*d;function j(a){a=new Date(a);var b=new Date();b=new Date(b.getFullYear(),b.getMonth(),b.getDate());if(b<a)return h.TODAY;if(b.getTime()-i<a.getTime())return h.WEEK_AGO;return b.getFullYear()===a.getFullYear()?h.CURRENT_YEAR:h.OTHER_YEAR}function k(a){a=j(a);switch(a){case h.TODAY:return"g:ia";case h.WEEK_AGO:return"l g:ia";case h.CURRENT_YEAR:return"F jS, g:ia";case h.OTHER_YEAR:return"F j, Y g:i a"}}function a(a,b){return c("formatDate")(new Date(a),k(a),void 0,b)}g["default"]=a}),98);
__d("MWMessageDeliveryStatus",["fbt","I64","LSIntEnum","getFBTSafeGenderFromGenderConst","getMessengerPreciseTimestamp","intlList","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){if(a.length!==1)return{heads:a,type:"MultipleSeenHeads"};a=a[0];return{head:a,type:"SingleSeenHead"}}function b(a,b){return{delivered:b,heads:a,type:"DeliveredAndRead"}}function e(a){return{count:a,type:"SeenCount"}}function k(a){return a.timestamp>0?h._(/*BTDS*/"__JHASH__i65FoHjBJBT__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender)),h._param("seen time",c("getMessengerPreciseTimestamp")(a.timestamp))]):h._(/*BTDS*/"__JHASH__o0y2JESDXU1__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))])}function l(a,b){if(a.length===0)return"";if(b)return h._(/*BTDS*/"__JHASH__xJFzJjmgrii__JHASH__").toString();b=a.map(function(a){return h._(/*BTDS*/"__JHASH__anoMlIo0TA0__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))])});a=c("intlList")(b,c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA);return h._(/*BTDS*/"__JHASH__rtgGiNEWfHK__JHASH__",[h._param("full name",a)]).toString()}function m(a){a=c("intlSummarizeNumber")(a);return h._(/*BTDS*/"__JHASH___KIWePVuuHb__JHASH__",[h._param("seen count",a)]).toString()}var n={delivered:h._(/*BTDS*/"__JHASH__DGTdcv4yxEO__JHASH__"),error:h._(/*BTDS*/"__JHASH__HWY7OcPbAjW__JHASH__"),loading:h._(/*BTDS*/"__JHASH__ge1hq8iGlfw__JHASH__"),retriableError:h._(/*BTDS*/"__JHASH__VG5ajSXV9DG__JHASH__"),sending:h._(/*BTDS*/"__JHASH__-KPam8KdjJ8__JHASH__"),sent:h._(/*BTDS*/"__JHASH__FdnMQ3ayYbi__JHASH__")};function f(a){switch(a.type){case"Sending":return n.sending;case"Sent":case"Delivered":return n.sent;case"Error":return n.error;case"SingleSeenHead":return k(a.head);case"NoneStatus":case"MultipleSeenHeads":return"";case"DeliveredAndRead":return l(a.heads,a.delivered);case"SeenCount":return m(a.count);case"Loading":return n.loading;case"RetriableError":return n.retriableError;case"ValidationError":return""}}function o(a){switch(a.type){case"Sending":return n.sending;case"Sent":return n.sent;case"Delivered":return n.delivered;case"Error":case"RetriableError":return n.error;case"SingleSeenHead":return k(a.head);case"DeliveredAndRead":return l(a.heads,a.delivered);default:return""}}function p(a){if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(1)))return{type:"Sending"};else if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(2))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(6)))return{type:"Sent"};else if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(4))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(5)))return{type:"Error"};else return{type:"NoneStatus"}}function q(a,b,c){var e=p(a.sendStatusV2);if((i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(4))||(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(5))||(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(1)))return e;else if(!c&&(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(2)))return{type:"NoneStatus"};else if((i||(i=d("I64"))).ge(b,a.timestampMs))return{type:"Delivered"};else return e}function r(a){return["SingleSeenHead","Sending","MultipleSeenHeads","Error","RetriableError"].includes(a.type)}g.seenHead=a;g.deliveredAndRead=b;g.seenCount=e;g.getSingleSeenHead=k;g.getSeenCount=m;g.Titles=n;g.getBroadcastStatusTitle=f;g.getStatusTitle=o;g.getFromSendStatus=p;g.getDeliveryStatusForMessageSentByYou=q;g.isAlwaysShownStatus=r}),226);
__d("MWPBaseMessageListRowActions.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={hidden:{visibility:"xlshs6z",$$css:!0},incoming:{flexDirection:"x1q0g3np",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0},root:{alignItems:"x6s0dn4",columnGap:"xl5lk40",display:"x78zum5",width:"x1mqs8db",$$css:!0}},l=i.createContext("full");function a(){return i.jsx(d("react-strict-dom").html.div,{role:"none",style:k.root})}a.displayName=a.name+" [from "+f.id+"]";function m(a){var b=a.children;a=a.outgoing;return i.jsx(d("react-strict-dom").html.div,{role:"none",style:[k.root,a?k.outgoing:k.incoming],children:b})}m.displayName=m.name+" [from "+f.id+"]";function b(a){var b=a.children;a=a.showWith;a=a===void 0?"full":a;var c=j(l);c=c==="partial"&&a!=="partial";return i.jsx(d("react-strict-dom").html.div,{"aria-hidden":c,style:c&&k.hidden,children:b})}b.displayName=b.name+" [from "+f.id+"]";function c(a){var b=a.ariaHidden,c=a.children,e=a.onMouseEnter,f=a.onMouseLeave,g=a.outgoing,h=a.visibility;h=h===void 0?"full":h;a=a.xstyle;return i.jsx(l.Provider,{value:h,children:i.jsx(d("react-strict-dom").html.div,{"aria-hidden":(h=b)!=null?h:!1,onMouseEnter:e,onMouseLeave:f,style:[n.root,g?n.outgoing:n.incoming,a],children:i.jsx(m,{outgoing:g,children:c})})})}c.displayName=c.name+" [from "+f.id+"]";var n={incoming:{paddingStart:"x1t2a60a",$$css:!0},outgoing:{paddingEnd:"x1mpkggp",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1mqs8db",zIndex:"x1n327nk",$$css:!0}};g.MWPBaseMessageListRowActionsEmptyList=a;g.MWPBaseMessageListRowActionsList=m;g.MWPBaseMessageListRowActionsListItem=b;g.MWPBaseMessageListRowActionsContainer=c}),98);
__d("MWPThreadCapabilitiesContext",["I64","Int64Hooks","LSIntEnum","LSMessageThreadUnsendabilityStatus","LSThreadBitOffset","ThreadStatus","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.createContext,m=e.useContext,n=l({blurMediaEnabled:!1,canUnsendMessage:!1,communityMessagingChannelDescriptionCustomization:!1,communityMessagingChannelInvite:!1,disableLinks:!1,editMessageEnabled:!1,feedbackAndReportEnabled:!1,hasLSThreadBitOffset:function(a){return!1},isPaused:!1,localDeleteMessageEnabled:!1,messageForwardEnabled:!1,messageUnsendEnabled:!1,modifyPinnedMessageV2Enabled:!1,reactEnabled:!1,reactionsV2WriteEnabled:!1,replyEnabled:!1,reportMessageToAdminEnabled:!1,rtcVideoCallEnabled:!1,rtcVoiceCallEnabled:!1,seenCountV2Enabled:!1,subThreadCreationEnabled:!1});function a(a){var b=a.children,e=a.customCapabilityCheck,f=a.thread,g=f.capabilities,h=f.capabilities2,l=f.capabilities3,m=f.capabilities4,o=f.capabilities5,p=f.threadType,q=d("Int64Hooks").useCallbackInt64(function(a){var b={capabilities:g,capabilities2:h,capabilities3:l,capabilities4:m,capabilities5:o,threadType:p};return d("LSThreadBitOffset").has(a,b)},[g,h,l,m,o,p]);a=d("Int64Hooks").useMemoInt64(function(){var a;return{blurMediaEnabled:q(46),canUnsendMessage:f.cannotUnsendReason!=null?(i||(i=d("I64"))).equal(f.cannotUnsendReason,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0,communityMessagingChannelDescriptionCustomization:q(135),communityMessagingChannelInvite:q(120),disableLinks:q(45),editMessageEnabled:q(194),feedbackAndReportEnabled:q(17),hasLSThreadBitOffset:(a=q)!=null?a:e,isPaused:f.threadStatus!=null&&((i||(i=d("I64"))).equal(f.threadStatus,(i||(i=d("I64"))).of_int32(c("ThreadStatus").PAUSED))||(i||(i=d("I64"))).equal(f.threadStatus,(i||(i=d("I64"))).of_int32(c("ThreadStatus").PAUSED_AND_UPGRADED_TO_COMMUNITY))),localDeleteMessageEnabled:q(102),messageForwardEnabled:q(103),messageUnsendEnabled:q(122)&&f.cannotUnsendReason!=null?(i||(i=d("I64"))).equal(f.cannotUnsendReason,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!1,modifyPinnedMessageV2Enabled:q(172),reactEnabled:q(18),reactionsV2WriteEnabled:q(169),replyEnabled:q(42),reportMessageToAdminEnabled:q(93),rtcVideoCallEnabled:q(24),rtcVoiceCallEnabled:q(25),seenCountV2Enabled:q(140),subThreadCreationEnabled:q(167)}},[e,q,f.threadStatus,f.cannotUnsendReason]);return k.jsx(n.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return m(n)}g.Provider=a;g.useMWPThreadCapabilitiesContext=b}),98);
__d("MWV2MessageReactionHooks",["EmojiRenderer","I64","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return a.map(function(a,b){b=d("EmojiRenderer").parse(a).map(function(a){return a.emoji});return b.length!==1?"":b[0].join("")}).filter(function(a){return a!==""})}function a(a,b){var e=(i||(i=c("useReStore")))(),g=d("MWPActor.react").useActor(),h=d("ReQLSuspense").useFirst(function(){return b!=null&&a!=null?d("ReQL").fromTableAscending(e.tables.reactions).getKeyRange(b,a,g):d("ReQL").empty()},[g,e,a,b],f.id+":38");if(h!=null)return h}function b(a,b){var e=(i||(i=c("useReStore")))(),g=d("ReQLSuspense").useArray(function(){return b!=null&&a!=null?d("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(b,a).filter(function(a){return a.viewerIsReactor&&(h||(h=d("I64"))).gt(a.count,(h||(h=d("I64"))).zero)}).map(function(a){a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(e.tables.reaction_v2_types).getKeyRange(a.reactionFbid),f.id+":70");return[a==null?void 0:a.reactionLiteral,a==null?void 0:a.reactionLiteralVariant16].filter(Boolean)}):d("ReQL").empty()},[e,b,a],f.id+":60").flat();g=j(g);return g}function e(a,b){var e=(i||(i=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return b!=null&&a!=null?d("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(b,a).filter(function(a){return a.viewerIsReactor}):d("ReQL").empty()},[e,a,b],f.id+":94");return d("ReQLSuspense").useFirst(function(){return g?d("ReQL").fromTableAscending(e.tables.reaction_v2_types).getKeyRange(g.reactionFbid).map(function(a){return a.reactionLiteral}):d("ReQL").empty()},[e,g],f.id+":104")}a={useSelectedReaction:a,useSelectedReactionsV2:b,useSelectedReactionV2:e};g.MWV2MessageReactionHooks=a}),98);
__d("MessageReactionOperation",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD:1,REMOVE:2,REMOVE_MULTI_REACT:3});f["default"]=a}),66);
__d("MessageReactionStyle",[],(function(a,b,c,d,e,f){a=Object.freeze({BASIC_SUPER_REACT_ANIMATION:1});f["default"]=a}),66);
__d("MessagingCommunityType",[],(function(a,b,c,d,e,f){a=Object.freeze({FB_COMMUNITY:0,STANDALONE_COMMUNITY:1});f["default"]=a}),66);
__d("isDeliveryStatusErrorState",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.type==="Error"||a.type==="RetriableError"}f["default"]=a}),66);
__d("mwCMisStandAloneCommunity",["I64","LSIntEnum","MessagingCommunityType"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a==null?!1:(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingCommunityType").STANDALONE_COMMUNITY))}g["default"]=a}),98);
__d("mwpMessageHasAttachment",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if(!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(1))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(1),(i||(i=d("LSIntEnum"))).ofNumber(8192)))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(128))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(128),(i||(i=d("LSIntEnum"))).ofNumber(8192))))return!(h||(h=d("I64"))).equal(a.displayedContentTypes,h.add((i||(i=d("LSIntEnum"))).ofNumber(1),i.ofNumber(512)));else return!1}g["default"]=a}),98);
__d("useGenAIFeedbackSubmissionStatus",["I64","LSIntEnum","LSMailboxAIBotFeedbackSubmissionStatus","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){var e;return d("ReQL").fromTableDescending(b.tables.ai_bot_feedback_submission_status).getKeyRange((e=a)!=null?e:"").filter(function(a){return(h||(h=d("I64"))).equal(a.feedbackSubmissionStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxAIBotFeedbackSubmissionStatus").SUBMITTED))}).map(function(a){return a.feedbackSubmissionStatus})},[b,a],f.id+":25");return e}g["default"]=a}),98);
__d("useIGDOptimisticReactMessage",["I64","LSAuthorityLevel","MAWTimeUtils","WATimeUtils","asyncToGeneratorRuntime","err","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useCallback;function a(){return j(function(a,e,g,h,j){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(j==null){var b=(yield a.reactions.get(e,g,h));yield a.reactions["delete"](e,g,h);return{removedReaction:b}}else{b={actorId:h,authorityLevel:(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").OPTIMISTIC),messageId:g,reaction:(b=j)!=null?b:"",threadKey:e,timestampMs:d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),transportKey:"Instamadillo"};yield a.reactions.upsert([e,g,h],b);return{addedReaction:b}}}catch(a){throw c("err")("Instamadillo: Failed to send or unsend optimistic reaction: "+a+" ")}});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":39")},[])}g["default"]=a}),98);
__d("useIsChatPreviewsEnabled",["MWLSThread","ReQL","ReQLSuspense","isUnjoinedCMThread","mwCMisStandAloneCommunity","qex","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),g=d("ReQLSuspense").useFirst(function(){return e!=null?d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(e):d("ReQL").empty()},[b,e],f.id+":28");return(a=d("MWLSThread").useThread(a,function(a){return i(a,g==null?void 0:g.communityType)}))!=null?a:!1}function i(a,b){if(a.needsAdminApprovalForNewParticipant===!0)return!1;return!d("isUnjoinedCMThread").isUnjoinedCMThread(a.threadType)?!1:c("mwCMisStandAloneCommunity")(b)&&!c("qex")._("1827")}g.useIsChatPreviewsEnabled=a;g.isChatPreviewsEnabled=i}),98);
__d("useIsMultiReactionEnabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","isUnjoinedCMThread","mwCMIsAnyCMThread","useIsChatPreviewsEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),g=d("ReQLSuspense").useFirst(function(){return e!=null?d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(e):d("ReQL").empty()},[b,e],f.id+":28");return(a=d("MWLSThread").useThread(a,function(a){if(d("isUnjoinedCMThread").isUnjoinedCMThread(a.threadType))return d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,g==null?void 0:g.communityType);if(!d("LSThreadBitOffset").has(156,a))return!1;if(c("mwCMIsAnyCMThread")(a.threadType))return!0;if(d("LSMessagingThreadTypeUtil").isDiscoverableChannel(a.threadType))return!0}))!=null?a:!1}g.useIsMultiReactEnabled=a}),98);
__d("useIsReactionsV2Enabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMThreadTypes.react","MWLSThread","ReQL","ReQLSuspense","useIsChatPreviewsEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),g=d("ReQLSuspense").useFirst(function(){return e!=null?d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(e):d("ReQL").empty()},[b,e],f.id+":34");return(a=d("MWLSThread").useThread(a,function(a){return i(a,g==null?void 0:g.communityType)}))!=null?a:!1}function i(a,b){if(d("LSMessagingThreadTypeUtil").isOpenFnFThread(a)&&!d("MWCMThreadTypes.react").isIGBroadcastChannelThread(a.threadSubtype))return!1;if(d("LSThreadBitOffset").has(139,a))return!0;a=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,b);return a?!0:!1}function b(a,b){var c=d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a.threadType)||d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(a.threadType);a=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,b);return c||a}g.useIsReactionsV2Enabled=a;g.isReactionsV2Enabled=i;g.isReactionsV2ReadOnly=b}),98);
__d("useLSMessagingSource",["IGDWebUtils","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),b=d("IGDWebUtils").isOnInstagramWeb();switch(a){case"Inbox":return"inboxInThread";case"FullscreenChat":return"fullscreenChat";case"ChatTab":return b?"igdChatTabsThreadView":"chatInThread";default:return"unknown"}}g["default"]=a}),98);
__d("useMWLSDefaultThreadSourceAndResetAttribution",["LSThreadAttributionTypeUtil","react","useLSMessagingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useLSMessagingSource")();return i(function(b){return d("LSThreadAttributionTypeUtil").getSourceAndResetAttribution(b,a)},[a])}g["default"]=a}),98);
__d("useMWPSendOrUnsendReaction",["FBLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpsertReactionStoredProcedure","LSOptimisticUpsertReactionV2StoredProcedure","MWPActor.react","MessageReactionOperation","MessageReactionStyle","ReQL","asyncToGeneratorRuntime","promiseDone","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useMWLSDefaultThreadSourceAndResetAttribution","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e,g,h,j){c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:h,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(c("MessageReactionOperation").ADD),reactionFbid:g,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!0})},"readwrite",void 0,void 0,f.id+":42"))}function l(a,b,c,d,e,f,g){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g,h,j,k){yield a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:g,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(k?c("MessageReactionOperation").REMOVE_MULTI_REACT:c("MessageReactionOperation").REMOVE),reactionFbid:h,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!1})},"readwrite",void 0,void 0,f.id+":72")});return m.apply(this,arguments)}function n(a,b,e,f,g){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.reactions_v2).getKeyRange(e.threadKey,e.messageId,f)).then(function(c){c!=null?k(a,b,e,f,c.count,g):k(a,b,e,f,(j||(j=d("I64"))).zero,g)}))}function a(a){var e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i=c("useMWLSDefaultThreadSourceAndResetAttribution")(),k=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a.threadKey);return d("Int64Hooks").useCallbackInt64(function(h){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(a.threadKey)));b=b?d("useIsReactionsV2Enabled").isReactionsV2Enabled(b):!1;if(b){var m=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.reaction_v2_types).filter(function(a){return a.reactionLiteral===h||a.reactionLiteralVariant16===h})));if(m!=null){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(a.threadKey,a.messageId).filter(function(a){return(!k||(j||(j=d("I64"))).equal(a.reactionFbid,m.reactionFbid))&&a.viewerIsReactor})));if(b==null)return n(e,g,a,m.reactionFbid,h);var o=(j||(j=d("I64"))).equal(b.reactionFbid,m.reactionFbid);(!k||o)&&(yield l(e,g,a,b.count,b.reactionFbid,h,k));o||(yield n(e,g,a,m.reactionFbid,h))}else c("FBLogger")("messenger_web").warn("Reactions v2: trying to send reaction that is not in reaction_v2_types table");return}return e.runInTransaction(function(b){return c("LSOptimisticUpsertReactionStoredProcedure")(c("LSFactory")(b),{actorId:g,messageId:a.messageId,reaction:h,sendAttribution:i(a.threadKey),threadKey:a.threadKey,timestampMs:(j||(j=d("I64"))).of_float(Date.now())})},"readwrite",void 0,void 0,f.id+":227")})())},[e,a,k,g,i])}g["default"]=a}),98);
__d("useIGDGlobalReactMessage",["FBLogger","I64","IGDBridgedAPI","Int64Hooks","LSAuthorityLevel","MWPActor.react","ReQL","ReQLSuspense","asyncToGeneratorRuntime","promiseDone","react-compiler-runtime","requireDeferred","useIGDOptimisticReactMessage","useMWPSendOrUnsendReaction","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MWLogMessageAction").__setRef("useIGDGlobalReactMessage");function a(a,e){var g=d("react-compiler-runtime").c(18),h=(i||(i=c("useReStore")))(),l=d("MWPActor.react").useActor(),m=a.transportKey==="Instamadillo",n=c("useIGDOptimisticReactMessage")(),o;g[0]!==h.tables.e2ee_igMessageAuxiliaryInfo||g[1]!==a.messageId?(o=function(){return d("ReQL").fromTableAscending(h.tables.e2ee_igMessageAuxiliaryInfo).getKeyRange(a.messageId)},g[0]=h.tables.e2ee_igMessageAuxiliaryInfo,g[1]=a.messageId,g[2]=o):o=g[2];var p;g[3]!==h||g[4]!==a.messageId?(p=[h,a.messageId],g[3]=h,g[4]=a.messageId,g[5]=p):p=g[5];o=d("ReQLSuspense").useFirst(o,p,f.id+":50");var q=Boolean(o==null?void 0:o.openEb),r=c("useMWPSendOrUnsendReaction")(a);g[6]!==l||g[7]!==n||g[8]!==h||g[9]!==m||g[10]!==q||g[11]!==a.messageId||g[12]!==a.senderId||g[13]!==a.threadKey||g[14]!==r||g[15]!==e?(p=function(){return function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d,f){if(m||q){var g=(yield n(h,a.threadKey,a.messageId,l,d)),i=g.removedReaction;g={messageId:a.messageId,reaction:i!=null?i.reaction:d,reactionStatus:i!=null?"deleted":"created",threadKey:a.threadKey};c("promiseDone")(c("IGDBridgedAPI").sendOrRemoveReaction(g)["catch"](function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield k(h,a.threadKey,a.messageId,l,i);throw c("FBLogger")("igd_web").catching(b).warn("Instamadillo: Failed to send or unsend reaction: %s.",b)});return function(a){return d.apply(this,arguments)}}()))}else{r((g=d)!=null?g:"")}j.onReady(function(b){return c("promiseDone")(b.log(h,a.messageId,a.threadKey,e,f,void 0,void 0,void 0,a.senderId,void 0,l))})});return function(a,b){return d.apply(this,arguments)}}()},o=[m,q,n,a.threadKey,a.messageId,a.senderId,h,l,r,e],g[6]=l,g[7]=n,g[8]=h,g[9]=m,g[10]=q,g[11]=a.messageId,g[12]=a.senderId,g[13]=a.threadKey,g[14]=r,g[15]=e,g[16]=p,g[17]=o):(p=g[16],o=g[17]);return d("Int64Hooks").useMemoInt64(p,o)}function k(a,e,g,i,j){return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(j!=null)return b.reactions.upsert([j.threadKey,j.messageId,j.actorId],babelHelpers["extends"]({},j));else{var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.reactions).getKeyRange(e,g,i).filter(function(a){return(h||(h=d("I64"))).equal(a.authorityLevel,h.of_int32(c("LSAuthorityLevel").OPTIMISTIC))})));if(f!=null)return b.reactions["delete"](f.threadKey,f.messageId,f.actorId)}});return function(a){return f.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":146")}g["default"]=a}),98);
__d("useIGDIsGenAiReelsPlugin",["I64","LSIntEnum","MNLSXMALayoutType","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=d("react-compiler-runtime").c(10),e=(j||(j=c("useReStore")))(),g;b[0]!==e.tables.attachments||b[1]!==a.messageId||b[2]!==a.threadKey?(g=function(){return d("ReQL").fromTableDescending(e.tables.attachments).getKeyRange(a.threadKey,a.messageId)},b[0]=e.tables.attachments,b[1]=a.messageId,b[2]=a.threadKey,b[3]=g):g=b[3];var k;b[4]!==e||b[5]!==a?(k=[e,a],b[4]=e,b[5]=a,b[6]=k):k=b[6];g=d("ReQLSuspense").useFirst(g,k,f.id+":24");if(a.botResponseId==null||g==null)return!1;b[7]!==g.hasXma||b[8]!==g.xmaLayoutType?(k=g.hasXma&&g.xmaLayoutType!=null&&(h||(h=d("I64"))).equal(g.xmaLayoutType,(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").PORTRAIT)),b[7]=g.hasXma,b[8]=g.xmaLayoutType,b[9]=k):k=b[9];return k}g["default"]=a}),98);
__d("useIGDMediaMangerUploadFailedToast",["fbt","IGDSErrorOutlineIcon.react","react","react-compiler-runtime","useIGDSToaster"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=c("useIGDSToaster")(),e;a[0]!==b?(e=function(a,d){b.add({icon:j.jsx(c("IGDSErrorOutlineIcon.react"),{alt:h._(/*BTDS*/"__JHASH__ScQg6mAoJXK__JHASH__")}),message:a,messageSecondary:d,target:"bottom-left"},{duration:2750})},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),226);
__d("useIGDMessageAttachment",["ReQL","ReQLSuspense","mwpMessageHasAttachment","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){var g=d("react-compiler-runtime").c(11),h;g[0]!==b?(h=c("mwpMessageHasAttachment")(b),g[0]=b,g[1]=h):h=g[1];var i=h,j;g[2]!==a.tables.attachments||g[3]!==i||g[4]!==b.messageId||g[5]!==e?(h=function(){return i?d("ReQL").fromTableAscending(a.tables.attachments,["attachmentType","isSharable","stickerType"]).getKeyRange(e,b.messageId):d("ReQL").empty()},j=[i,a.tables.attachments,e,b.messageId],g[2]=a.tables.attachments,g[3]=i,g[4]=b.messageId,g[5]=e,g[6]=h,g[7]=j):(h=g[6],j=g[7]);h=d("ReQLSuspense").useArray(h,j,f.id+":37");j=h[0];h=h.length>1;var k;g[8]!==j||g[9]!==h?(k={attachment:j,hasMultipleAttachments:h},g[8]=j,g[9]=h,g[10]=k):k=g[10];return k}g["default"]=a}),98);
__d("useIGDMessageReply.react",["fbt","IGDThreadListNewMessageLoggingDataContext","MWMediaManager","MWPReplyContext.react","MessengerWebUXLogger","getInstamadilloLoggingExtraData","react","react-compiler-runtime","useIGDMediaMangerUploadFailedToast"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||d("react")).useContext;function a(a,b,e){var f=d("react-compiler-runtime").c(14),g=j(d("MWPReplyContext.react").MWPReplyContext),i=g.setReply;g=c("useIGDMediaMangerUploadFailedToast")();var k;f[0]!==g||f[1]!==b?(k={showUploadFailureToast:g,thread:b},f[0]=g,f[1]=b,f[2]=k):k=f[2];g=d("MWMediaManager").useMediaManager(k);var l=g.resetAttachments,m=c("MessengerWebUXLogger").useInteractionLogger(),n=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();f[3]!==n||f[4]!==m||f[5]!==a||f[6]!==e||f[7]!==l||f[8]!==i||f[9]!==b?(k=function(d){m==null?void 0:m({eventName:"message_reply",extraData:c("getInstamadilloLoggingExtraData")(b),flowInstanceId:n}),i({messageId:a.messageId,offlineThreadingId:a.offlineThreadingId,sendStatusV2:a.sendStatusV2,threadKey:a.threadKey,timestampMs:a.timestampMs},a.threadKey),l(),e==null?void 0:e()},f[3]=n,f[4]=m,f[5]=a,f[6]=e,f[7]=l,f[8]=i,f[9]=b,f[10]=k):k=f[10];g=k;f[11]===Symbol["for"]("react.memo_cache_sentinel")?(k=h._(/*BTDS*/"__JHASH__L3od8hyUAW0__JHASH__"),f[11]=k):k=f[11];k=k;f[12]!==g?(k=[g,k],f[12]=g,f[13]=k):k=f[13];return k}g["default"]=a}),226);
__d("useIsGenAiFeedbackEnabled",["I64","LSContactTypeExact","LSIntEnum","MWPContactContext.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var e=d("MWPContactContext.react").useMWPContactStableContext();e=e.contact;if(a==null)return!1;return!b?!1:e!=null&&(h||(h=d("I64"))).equal(e.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT))}g["default"]=a}),98);
__d("useMWV2SubmitFeedbackAction",["LSFactory","LSIntEnum","LSSubmitGenAIBotFeedbackStoredProcedure","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(a,b){var e=(h||(h=c("useReStore")))();return k(function(g){c("promiseDone")(e.runInTransaction(function(b){return c("LSSubmitGenAIBotFeedbackStoredProcedure")(c("LSFactory")(b),{botFeedbackKind:(i||(i=d("LSIntEnum"))).ofNumber(g),botResponseId:a||"",feedbackKindType:i.ofNumber(g)})},"readwrite",void 0,void 0,f.id+":30"),b)},[e,a,b])}g["default"]=a}),98);